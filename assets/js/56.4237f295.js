(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{415:function(s,t,a){"use strict";a.r(t);var e=a(26),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"git-规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-规范"}},[s._v("#")]),s._v(" git 规范")]),s._v(" "),a("h1",{attrs:{id:"本项目使用的插件及说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本项目使用的插件及说明"}},[s._v("#")]),s._v(" 本项目使用的插件及说明")]),s._v(" "),a("h2",{attrs:{id:"husky-和-commitlint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#husky-和-commitlint"}},[s._v("#")]),s._v(" husky 和 commitlint")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("安装 "),a("code",[s._v("husky")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -D husky\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("修改 "),a("code",[s._v("package.json")]),s._v(" 中的 script")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prepare"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"husky install"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("修改后，执行 "),a("code",[s._v("npm run prepare")]),s._v("，会在根目录生成文件夹 "),a("code",[s._v(".husky")]),s._v(";")]),s._v(" "),a("p",[s._v("执行 "),a("code",[s._v("npx husky add .husky/commit-msg ''")]),s._v(";\n此命令 会在 "),a("code",[s._v(".husky")]),s._v(" 文件 创建文件 "),a("code",[s._v("commit-msg")]),s._v("，修改最后一行：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('#!/usr/bin/env sh\n. "$(dirname -- "$0")/_/husky.sh"\n\n#--no-install 参数表示强制npx使用项目中node_modules目录中的commitlint包\nnpx --no-install commitlint --edit $1\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("安装 "),a("code",[s._v("commitlint")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install -D @commitlint/cli @commitlint/config-conventional\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在根目录创建文件 "),a("code",[s._v("commitlint.config.js")]),s._v(" 并添加配置，参考 "),a("a",{attrs:{href:"https://github.com/conventional-changelog/commitlint/blob/master/docs/reference-rules.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("commitlint 配置"),a("OutboundLink")],1),s._v(";")])]),s._v(" "),a("li",[a("p",[s._v("正常提交代码 即可使用")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'commit test'")]),s._v("\n\n⧗   input: commit "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n✖   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" may not be empty "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("type-empty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n✖   subject may not be empty "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("subject-empty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"customizable-交互式操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#customizable-交互式操作"}},[s._v("#")]),s._v(" customizable 交互式操作")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("安装 customizable")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install -D commitizen cz-conventional-changelog commitlint-config-cz cz-customizable\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("修改 "),a("code",[s._v("package.json")]),s._v(" 中的 scripts")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    commit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git-cz"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("修改 "),a("code",[s._v("package.json")]),s._v(" 中的 config")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用自定义规范则使用")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"config"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commitizen"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"path"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node_modules/cz-customizable"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 或者")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"config"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cz-customizable"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 可以对.cz-config.js 进行重命名")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"config"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"config/config.js"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("在根目录创建文件 "),a("code",[s._v(".cz-config.js")]),s._v("\n添加配置项，参考 "),a("a",{attrs:{href:"https://github.com/leoforfree/cz-customizable/blob/master/cz-config-EXAMPLE.js",target:"_blank",rel:"noopener noreferrer"}},[s._v("customizable 配置"),a("OutboundLink")],1),s._v("；\n修改 "),a("code",[s._v("commitlint.config.js")]),s._v(" 的 extents 中 增加 'cz'；")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("extents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@commitlint/config-conventional'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cz'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("提交代码")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("git add .\nnpm run commit\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("根据提示 填写内容，"),a("code",[s._v("enter")]),s._v(" 可跳过")])])]),s._v(" "),a("p",[a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),s._v(" "),a("h1",{attrs:{id:"commit-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commit-message"}},[s._v("#")]),s._v(" commit message")]),s._v(" "),a("h2",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[s._v("#")]),s._v(" 说明")]),s._v(" "),a("p",[s._v("一个完整的 commit message 应该包含三个部分:")]),s._v(" "),a("ul",[a("li",[s._v("header")]),s._v(" "),a("li",[s._v("body")]),s._v(" "),a("li",[s._v("footer")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# header\nfeat(dao): add db utils\n# body\n- describe for util1\n- describe for util2\nsee trello 看板卡片\n# footer\nBREAKING CHANGE:...\n\n\n\n<type>(<scope>):<subject>\n<body>\n<footer>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"header"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#header"}},[s._v("#")]),s._v(" header")]),s._v(" "),a("p",[s._v("header 只有一行,由三部分组成:\n"),a("code",[s._v("<type>(<scope>):<subject>")])]),s._v(" "),a("h4",{attrs:{id:"type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[s._v("#")]),s._v(" type")]),s._v(" "),a("p",[s._v("说明提交的类别,只允许使用下面的类型.")]),s._v(" "),a("h4",{attrs:{id:"type可选值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#type可选值"}},[s._v("#")]),s._v(" "),a("strong",[s._v("type可选值")])]),s._v(" "),a("ul",[a("li",[s._v("feat "),a("em",[s._v("新功能(feature)")])]),s._v(" "),a("li",[s._v("fix "),a("em",[s._v("用于修复问题")])]),s._v(" "),a("li",[s._v("docs "),a("em",[s._v("文档")])]),s._v(" "),a("li",[s._v("style "),a("em",[s._v("修改格式(不影响代码运行的变动)")])]),s._v(" "),a("li",[s._v("refactor "),a("em",[s._v("重构")])]),s._v(" "),a("li",[s._v("perf "),a("em",[s._v("优化相关")])]),s._v(" "),a("li",[s._v("test "),a("em",[s._v("增加测试用例")])]),s._v(" "),a("li",[s._v("revert "),a("em",[s._v("回滚")])]),s._v(" "),a("li",[s._v("merge "),a("em",[s._v("合并代码")])]),s._v(" "),a("li",[s._v("chore "),a("em",[s._v("构建过程或辅助工具的变动 如 CI CD")])])]),s._v(" "),a("h4",{attrs:{id:"scope-可选"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scope-可选"}},[s._v("#")]),s._v(" scope(可选)")]),s._v(" "),a("p",[s._v("是可选的,用于说明此次提交影响范围")]),s._v(" "),a("h4",{attrs:{id:"subject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#subject"}},[s._v("#")]),s._v(" subject")]),s._v(" "),a("p",[s._v("对提交的简短描述,不超过50字符\n"),a("strong",[s._v("规范")]),s._v("\n动词使用第一人称现在时.如 fix 而不是 fixed,add 而不是 added.\n首字母小写.\n结尾不需要句号.")]),s._v(" "),a("h3",{attrs:{id:"body-可选"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#body-可选"}},[s._v("#")]),s._v(" body(可选)")]),s._v(" "),a("p",[s._v("body 是可选的,更详细的描述,对于简单的提交也可缺省\n"),a("em",[s._v("规范")]),s._v("\n动词使用第一人称现在时.如 fix 而不是 fixed,add 而不是 added.\n用换行分割信息\n说明动机和修改前后对比")]),s._v(" "),a("h3",{attrs:{id:"footer-可选"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#footer-可选"}},[s._v("#")]),s._v(" footer(可选)")]),s._v(" "),a("p",[s._v("对于不兼容的变更,footer以 "),a("code",[s._v("BREAKING CHANGE")]),s._v(" 开头.\n后面是变动描述,理由等.")]),s._v(" "),a("h3",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),a("p",[a("em",[s._v("vue 项目(同样使用AngularJS规范)里的 git commit message")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("feat(reactivity): `proxyRefs` method and `ShallowUnwrapRefs` type (#1682)\nBREAKING CHANGE: template auto ref unwrapping are now applied shallowly,\ni.e. only at the root level. See https://github.com/vuejs/vue-next/pull/1682 for more details.\n\n\nfix(hmr): should update el for `HYDRATE_EVENTS` patchFlags node (#1707)\nfix https://github.com/vitejs/vite/issues/613\n\n\nrefactor(runtime-core): adjust error handling behavior\n- Crash in dev to make the errors more noticeable\n- Recover in prod to reduce impact on end users\n")])])]),a("h1",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.conventionalcommits.org/en/v1.0.0/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.conventionalcommits.org/en/v1.0.0/"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://developers.google.com/blockly/guides/modify/contribute/commits",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://developers.google.com/blockly/guides/modify/contribute/commits"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#-git-commit-guidelines",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#-git-commit-guidelines"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=n.exports}}]);